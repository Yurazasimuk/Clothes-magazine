<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Wishlist - MERO</title>
    <link rel="stylesheet" href="../../../../css/style.css">
</head>
<body>
<header>
    <div class="header-left">
        <div class="logo"><a href="index.html">MERO</a></div>
        <div class="nav-cats"><a href="products.html?type=women">Woman</a><a href="products.html?type=men">Man</a></div>
    </div>
    <div class="header-center">
        <div class="search-bar"><input type="text" placeholder="Search..."><span>üîç</span></div>
        <div class="nav-links"><a href="products.html?type=sale" style="color: #cc0000;">Sale</a><a href="products.html?type=accessories">Accessories</a></div>
    </div>
    <div class="header-right">
        <a href="wishlist.html" class="icon-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg></a>
        <a href="login.html" class="icon-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg></a>
        <a href="cart.html" class="icon-btn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M9 20a1 1 0 1 0 0 2 1 1 0 1 0 0-2z"></path><path d="M20 20a1 1 0 1 0 0 2 1 1 0 1 0 0-2z"></path><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
            <span id="cartBadge" class="cart-badge">0</span>
        </a>
    </div>
</header>

<div class="cart-page-container">
    <h2 style="text-align:center; text-transform:uppercase; font-family:'Playfair Display', serif;">My Wishlist</h2>
    <div id="wishlistContainer"></div>
</div>

<footer><div style="text-align:center; font-size:12px; color:#999;">¬© 2025 MERO. All rights reserved.</div></footer>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        renderWishlist();
        updateBadge();
        highlightActiveMenu();
    });

    function renderWishlist() {
        const container = document.getElementById('wishlistContainer');
        let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];

        if (!wishlist.length) {
            container.innerHTML = '<p style="text-align: center; color: #999; padding: 40px;">Your wishlist is empty.</p>';
            return;
        }

        container.innerHTML = '';
        wishlist.forEach((item, index) => {
            container.innerHTML += `
                <div class="cart-item">
                    <div style="display:flex; align-items:center;">
                        <img src="${item.image}" alt="${item.name}">
                        <div class="cart-info"><h4>${item.name}</h4><p style="font-weight:bold;">${item.price} UAH</p></div>
                    </div>
                    <div>
                        <button onclick="moveToCart(${index})" style="background:#000; color:white; padding:8px 15px; font-size:10px; text-transform:uppercase; margin-right:10px;">Move to Cart</button>
                        <button onclick="removeFromWishlist(${index})" style="color:#cc0000; font-size:12px; font-weight:600; border:none; background:none; cursor:pointer;">REMOVE</button>
                    </div>
                </div>`;
        });
    }

    function removeFromWishlist(index) {
        let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
        wishlist.splice(index, 1);
        localStorage.setItem('wishlist', JSON.stringify(wishlist));
        renderWishlist();
    }

    function moveToCart(index) {
        let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        let item = wishlist[index];
        cart.push(item);
        wishlist.splice(index, 1);

        localStorage.setItem('cart', JSON.stringify(cart));
        localStorage.setItem('wishlist', JSON.stringify(wishlist));

        renderWishlist();
        updateBadge();
        alert("Moved to cart!");
    }

    function updateBadge() {
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        const badge = document.getElementById('cartBadge');
        if (badge) { badge.innerText = cart.length; badge.classList.toggle('show', cart.length > 0); }
    }


    function highlightActiveMenu() {
        const currentUrl = window.location.href;
        const links = document.querySelectorAll('header a');

        links.forEach(link => {

            if (link.href === currentUrl) {
                link.classList.add('active-link');
            }
        });
    }
</script>
</body>
</html>